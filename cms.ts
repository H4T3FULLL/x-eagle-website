import fs from 'fs';import path from 'path';import matter from 'gray-matter';import {remark} from 'remark';import html from 'remark-html';const postsDir=path.join(process.cwd(),'content','news');export async function getAllPostsMeta(){if(!fs.existsSync(postsDir))return[];const files=fs.readdirSync(postsDir).filter(f=>f.endsWith('.md'));const out=[];for(const file of files){const full=path.join(postsDir,file);const raw=fs.readFileSync(full,'utf-8');const {data}=matter(raw);out.push({slug:file.replace(/\.md$/,''),title:data.title||file,date:data.date||'',excerpt:data.excerpt||''});}return out.sort((a:any,b:any)=>a.date<b.date?1:-1);}export async function getPostBySlug(slug:string){const full=path.join(postsDir,`${slug}.md`);const raw=fs.readFileSync(full,'utf-8');const {data,content}=matter(raw);const processed=await remark().use(html).process(content);return{slug,html:processed.toString(),meta:{title:data.title||slug,date:data.date||'',excerpt:data.excerpt||''}};}